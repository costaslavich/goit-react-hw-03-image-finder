{"version":3,"sources":["components/Modal/Modal.module.css","components/Gallery/Gallery.module.css","styles.module.css","components/PhotoCard/PhotoCard.module.css","components/SearchForm/SearchForm.module.css","components/Modal/Modal.js","components/SearchForm/SearchForm.js","components/ErrorNotification/ErrorNotification.js","components/PhotoCard/PhotoCard.js","components/Gallery/Gallery.js","service/pixabay-api.js","App.js","index.js"],"names":["module","exports","overlay","modal","gallery","button","gallery_item","fullscreen_button","app","photo_card","stats","stats_item","search_form","Modal","backdropRef","createRef","handleKeyPress","event","code","_this","props","onClose","handleBackDropClick","current","target","window","addEventListener","this","removeEventListener","largeImage","react_default","a","createElement","className","styles","ref","onClickCapture","role","onKeyDownCapture","src","alt","Component","defaultProps","SearchForm","state","query","handleChange","setState","value","handleSubmit","preventDefault","onSubmit","type","autoComplete","placeholder","onChange","ErrorNotification","_ref","text","PhotoCard","webformatURL","likes","views","comments","downloads","openModal","onClick","Gallery","pictures","map","picture","key","id","components_PhotoCard_PhotoCard","Object","assign","largeImageURL","fetchPictures","pageNumber","arguments","length","undefined","axios","get","concat","mapperHelper","items","App","isLoading","error","isModalOpen","onSearchForm","fetchPicture","then","_ref2","data","hits","catch","finally","handleClickMorePicture","_this$state","_ref3","toConsumableArray","closeModal","handleChangeImg","url","prevState","scrollTo","top","document","body","scrollHeight","behavior","_this$state2","SearchForm_SearchForm","LazyLoad_default","height","throttle","debounce","offsetVertical","components_Gallery_Gallery","Modal_Modal","components_ErrorNotification_ErrorNotification","message","ReactDOM","render","App_App","getElementById"],"mappings":"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","file":"static/js/main.e6ed0a4b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__2TWDB\",\"modal\":\"Modal_modal__2kp50\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"Gallery_gallery__JQRhh\",\"button\":\"Gallery_button__2KSAs\",\"gallery_item\":\"Gallery_gallery_item__eaZuM\",\"fullscreen_button\":\"Gallery_fullscreen_button__46eQE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"styles_app__f2Ltl\",\"button\":\"styles_button__lOkjd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"photo_card\":\"PhotoCard_photo_card__3JFY1\",\"stats\":\"PhotoCard_stats__ujLnQ\",\"stats_item\":\"PhotoCard_stats_item__3rTvV\",\"fullscreen_button\":\"PhotoCard_fullscreen_button__3-2xc\",\"gallery_item\":\"PhotoCard_gallery_item__1pazb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"search_form\":\"SearchForm_search_form__3aFAg\"};","import React, { Component, createRef } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Modal.module.css';\n\nexport default class Modal extends Component {\n  static defaultProps = {\n    largeImage: '',\n  };\n\n  static propTypes = {\n    onClose: PropTypes.func.isRequired,\n    largeImage: PropTypes.string,\n  };\n\n  backdropRef = createRef();\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyPress);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyPress);\n  }\n\n  handleKeyPress = event => {\n    if (event.code !== 'Escape') {\n      return;\n    }\n    this.props.onClose();\n  };\n\n  handleBackDropClick = event => {\n    const { current } = this.backdropRef;\n\n    if (current && event.target !== current) {\n      return;\n    }\n    this.props.onClose();\n  };\n\n  render() {\n    const { largeImage } = this.props;\n    return (\n      <div\n        className={styles.overlay}\n        ref={this.backdropRef}\n        onClickCapture={this.handleBackDropClick}\n        role=\"img\"\n        onKeyDownCapture={this.handleKeyPress}\n      >\n        <div className={styles.modal}>\n          <img src={largeImage} alt=\"random-img\" />\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './SearchForm.module.css';\n\nexport default class SearchForm extends Component {\n  static propTypes = {\n    onSubmit: PropTypes.func.isRequired,\n  };\n\n  state = {\n    query: '',\n  };\n\n  handleChange = event => {\n    this.setState({\n      query: event.target.value,\n    });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n\n    this.props.onSubmit(this.state.query);\n\n    this.setState({ query: '' });\n  };\n\n  render() {\n    const { query } = this.state;\n\n    return (\n      <form className={styles.search_form} onSubmit={this.handleSubmit}>\n        <input\n          type=\"text\"\n          autoComplete=\"off\"\n          placeholder=\"Search images...\"\n          onChange={this.handleChange}\n          value={query}\n        />\n      </form>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst ErrorNotification = ({ text }) => (\n  <h1> WHOOPS, something went wrong !!! {text}</h1>\n);\n\nErrorNotification.propTypes = {\n  text: PropTypes.string.isRequired,\n};\n\nexport default ErrorNotification;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './PhotoCard.module.css';\n\nconst PhotoCard = ({\n  webformatURL,\n  likes,\n  views,\n  comments,\n  downloads,\n  openModal,\n}) => (\n  <div className={styles.photo_card}>\n    <img src={webformatURL} alt=\"random-img\" />\n\n    <div className={styles.stats}>\n      <p className={styles.stats_item}>\n        <i className=\"material-icons\">thumb_up</i>\n        {likes}\n      </p>\n      <p className={styles.stats_item}>\n        <i className=\"material-icons\">visibility</i>\n        {views}\n      </p>\n      <p className={styles.stats_item}>\n        <i className=\"material-icons\">comment</i>\n        {comments}\n      </p>\n      <p className={styles.stats_item}>\n        <i className=\"material-icons\">cloud_download</i>\n        {downloads}\n      </p>\n    </div>\n\n    <button\n      type=\"button\"\n      className={styles.fullscreen_button}\n      onClick={openModal}\n    >\n      <i className=\"material-icons\">zoom_out_map</i>\n    </button>\n  </div>\n);\n\nPhotoCard.defaultProps = {\n  comments: 129,\n};\n\nPhotoCard.propTypes = {\n  webformatURL: PropTypes.string.isRequired,\n  likes: PropTypes.number.isRequired,\n  views: PropTypes.number.isRequired,\n  comments: PropTypes.number,\n  downloads: PropTypes.number.isRequired,\n  openModal: PropTypes.func.isRequired,\n};\n\nexport default PhotoCard;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport PhotoCard from '../PhotoCard/PhotoCard';\nimport styles from './Gallery.module.css';\n\nconst Gallery = ({ pictures, openModal }) => (\n  <div>\n    <ul className={styles.gallery}>\n      {pictures.map(picture => (\n        <li key={picture.id} className={styles.gallery_item}>\n          <PhotoCard\n            {...picture}\n            openModal={() => openModal(picture.largeImageURL)}\n          />\n        </li>\n      ))}\n    </ul>\n  </div>\n);\n\nGallery.propTypes = {\n  pictures: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n    }).isRequired,\n  ).isRequired,\n  openModal: PropTypes.func.isRequired,\n};\n\nexport default Gallery;\n","import axios from 'axios';\n\nconst PIXABAY_API_URL =\n  'https://pixabay.com/api/?image_type=photo&orientation=horizontal&per_page=12&key=12576439-4d1f98aea9d85243038051cc1&q=';\n\nexport const fetchPictures = (query, pageNumber = 1) =>\n  axios.get(`${PIXABAY_API_URL + query}&page=${pageNumber}`);\n\nexport const fn = () => null;\n","import React, { Component } from 'react';\nimport LazyLoad from 'react-lazy-load';\nimport Modal from './components/Modal/Modal';\nimport SearchForm from './components/SearchForm/SearchForm';\nimport ErrorNotification from './components/ErrorNotification/ErrorNotification';\nimport Gallery from './components/Gallery/Gallery';\nimport { fetchPictures } from './service/pixabay-api';\nimport styles from './styles.module.css';\n\nconst mapperHelper = items =>\n  items.map(({ id, webformatURL, largeImageURL, likes, views, downloads }) => ({\n    id,\n    webformatURL,\n    largeImageURL,\n    likes,\n    views,\n    downloads,\n  }));\n\nexport default class App extends Component {\n  state = {\n    pictures: [],\n    query: '',\n    pageNumber: 1,\n    isLoading: false,\n    error: false,\n    isModalOpen: false,\n    largeImageURL: null,\n  };\n\n  componentDidMount() {\n    const { query } = this.state;\n    this.fetchPicture(query);\n  }\n\n  componentDidUpdate(prevState) {\n    const { pictures } = this.state;\n\n    if (prevState.pictures !== pictures) {\n      window.scrollTo({\n        top: document.body.scrollHeight,\n        behavior: 'smooth',\n      });\n    }\n  }\n\n  onSearchForm = value => {\n    this.setState(\n      {\n        query: value,\n        pictures: [],\n        pageNumber: 1,\n      },\n      () => {\n        this.fetchPicture(value);\n      },\n    );\n  };\n\n  fetchPicture = query => {\n    this.setState({ isLoading: true });\n\n    fetchPictures(query)\n      .then(({ data }) => {\n        this.setState(state => ({\n          pictures: data.hits,\n          pageNumber: state.pageNumber + 1,\n        }));\n      })\n      .catch(error => this.setState({ error }))\n      .finally(() =>\n        this.setState({\n          isLoading: false,\n        }),\n      );\n  };\n\n  handleClickMorePicture = () => {\n    const { query, pageNumber } = this.state;\n\n    fetchPictures(query, pageNumber)\n      .then(({ data }) => {\n        this.setState(state => ({\n          query,\n          pictures: [...state.pictures, ...mapperHelper(data.hits)],\n          pageNumber: state.pageNumber + 1,\n        }));\n      })\n      .catch(error => this.setState({ error }));\n  };\n\n  openModal = id => {\n    this.setState({ isModalOpen: true, largeImageURL: id });\n  };\n\n  closeModal = () => {\n    this.setState({ isModalOpen: false });\n  };\n\n  // handleChangeImg = id => this.state.pictures.find(item => item.id === id);\n  handleChangeImg = url => {\n    this.setState({ largeImageURL: url });\n  };\n\n  render() {\n    const {\n      error,\n      pictures,\n      isModalOpen,\n      isLoading,\n      largeImageURL,\n    } = this.state;\n\n    return (\n      <div className={styles.app}>\n        <SearchForm onSubmit={this.onSearchForm} />\n        {isLoading && (\n          <LazyLoad\n            height={762}\n            throttle={250}\n            debounce={false}\n            offsetVertical={300}\n          >\n            <img\n              src=\"http://apod.nasa.gov/apod/image/1502/ToadSky_Lane_1080_annotated.jpg\"\n              alt=\"Lazy Load Example\"\n            />\n          </LazyLoad>\n        )}\n        {pictures.length > 0 && (\n          <Gallery pictures={pictures} openModal={this.openModal} />\n        )}\n        {pictures.length > 0 && (\n          <button\n            type=\"button\"\n            className={styles.button}\n            onClick={this.handleClickMorePicture}\n          >\n            Load more\n          </button>\n        )}\n        {isModalOpen && (\n          <Modal onClose={this.closeModal} largeImage={largeImageURL} />\n        )}\n        {error && <ErrorNotification text={error.message} />}\n      </div>\n    );\n  }\n}\n\n// {isLoading && (\n//   <LazyLoad\n//     height={762}\n//     throttle={250}\n//     debounce={false}\n//     offsetVertical={300}\n//   >\n//     <img\n//       src=\"http://apod.nasa.gov/apod/image/1502/ToadSky_Lane_1080_annotated.jpg\"\n//       alt=\"Lazy Load Example\"\n//     />\n//   </LazyLoad>\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}